!function s(i,n,r){function o(t,e){if(!n[t]){if(!i[t]){var a="function"==typeof require&&require;if(!e&&a)return a(t,!0);if(d)return d(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}a=n[t]={exports:{}},i[t][0].call(a.exports,function(e){return o(i[t][1][e]||e)},a,a.exports,s,i,n,r)}return n[t].exports}for(var d="function"==typeof require&&require,e=0;e<r.length;e++)o(r[e]);return o}({1:[function(e,t,a){var s=n(e("./states/Boot.js")),i=n(e("./states/Preload.js")),e=n(e("./states/Game.js"));function n(e){return e&&e.__esModule?e:{default:e}}var r=new Phaser.Game(1080,1920,Phaser.AUTO,"gameContainer");r.state.add("Boot",s.default),r.state.add("Preload",i.default),r.state.add("Game",e.default),r.state.start("Boot")},{"./states/Boot.js":2,"./states/Game.js":3,"./states/Preload.js":4}],2:[function(e,t,a){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=i(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0===a)return("string"===t?String:Number)(e);if("object"!=i(a=a.call(e,t||"default")))return a;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==i(e)?e:e+""))(s.key),s)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;a.default=(()=>{function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}return t=e,(a=[{key:"preload",value:function(){console.log("Boot -> preload")}},{key:"create",value:function(){console.log("Boot -> create"),this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.scale.refresh(),this.state.start("Preload")}}])&&n(t.prototype,a),s&&n(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,a,s})()},{}],3:[function(e,t,a){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(e=>{if(Array.isArray(e))return s(e)})(e)||(e=>{if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)})(e)||((e,t)=>{var a;if(e)return"string"==typeof e?s(e,t):"Map"===(a="Object"===(a={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(e,t):void 0})(e)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,s=Array(t);a<t;a++)s[a]=e[a];return s}function n(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=i(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0===a)return("string"===t?String:Number)(e);if("object"!=i(a=a.call(e,t||"default")))return a;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==i(e)?e:e+""))(s.key),s)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;a.default=(()=>{function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.score=95e3,this.displayedScore=95e3,this.timerStarted=!1,this.hand=null,this.handRepeatTimer=null,this.handFrameIndex=0,this.handPausedUntilNextClick=!1,this.fullFlow=["diamonds8","heart7","clubs6","wildCard","heart3","spades2_left","diamondsA","spades2_right"],this.alternatePathChosen=!1,this.awaitingPostWildcardClick=!1,this.postWildcardPhase=!1,this.postWildcardFlow=[],this.lastPostWildcardColor=null,this.handStep=0,this.counter=10,this.timerText=null,this.bomb=null,this.timerEvent=null,this.flippedCards=new Set,this.streakIcons=[],this.cardSprites={},this.tapSequenceEvents=[]}return t=e,(a=[{key:"create",value:function(){var t=this,e=this.world.centerX;this.add.sprite(0,0,"background").scale.setTo(1);this.add.sprite(e-190,40,"logo").scale.setTo(1.3);var a=this.add.sprite(10,300,"hudPanel"),s=(a.scale.setTo(1.3),a.anchor.set(0,0),a.width),i=a.height,s=(this.scoreText=this.add.text(0,0,this.displayedScore.toLocaleString(),{font:"bold 50px semibold",fill:"#a14218"}),this.scoreText.anchor.set(.7),this.scoreText.x=a.x+s/2+55,this.scoreText.y=a.y+i/2+5,this.add.sprite(e+180,300,"hudStreak")),a=(s.scale.setTo(1.3),s.x+70),i=s.y+55;[{x:a,y:i},{x:a+72,y:i},{x:a+144,y:i},{x:a+216,y:i}].forEach(function(e){e=t.add.sprite(e.x,e.y,null);e.anchor.set(.5),e.scale.setTo(1.1),e.visible=!1,t.streakIcons.push(e)}),[{key:"heart3",x:e-180,y:630,angle:15},{key:"diamondsA",x:e+180,y:630,angle:-15},{key:"wildCard",x:e,y:620,angle:0}].forEach(function(e){return t.addCard(e.key,e.x,e.y,e.angle)}),[{key:"spades2_left",x:e-303,y:1090,angle:15},{key:"spades2_right",x:e+303,y:1090,angle:-15}].forEach(function(e){return t.addCard(e.key,e.x,e.y,e.angle)});[{key:"diamonds8",x:e-242,y:860,angle:15},{key:"heart7",x:e,y:855,angle:0},{key:"clubs6",x:e+242,y:860,angle:-15}].forEach(function(e){return t.addCard(e.key,e.x,e.y,e.angle)}),this.flippedCards.add("heart7"),this.bomb=this.add.sprite(e+70,950,"000"),this.bomb.anchor.set(.5),this.bomb.angle=30,this.bomb.scale.setTo(.9),this.bombFrames=["000","001","002"],this.bombFrameIndex=0,this.bombAnimationLoop=this.game.time.events.loop(200,function(){t.bombFrameIndex=(t.bombFrameIndex+1)%t.bombFrames.length;var e=t.bombFrames[t.bombFrameIndex];t.bomb&&t.bomb.alive&&t.cache.checkImageKey(e)?t.bomb.loadTexture(e):console.warn("Bomb missing or frame not found in cache:",e)}),this.timerText=this.add.text(this.bomb.x-10,this.bomb.y+13,"10",{font:"bold 60px semibold",fill:"#fff1b2"}),this.timerText.anchor.set(.5),this.timerText.visible=!0;s=this.add.sprite(e,1726,"talon");s.anchor.set(.5),s.scale.setTo(2.2),this.activeCard=this.add.sprite(e,1726,"heart7"),this.activeCard.anchor.set(.5),this.activeCard.scale.setTo(.9),this.phase1Flow1=["diamonds8","heart7","clubs6"],this.phase1Flow2=["spades2_left","spades2_right"],this.setCardInput(),this.hand=this.add.sprite(-100,-100,"h000"),this.hand.anchor.set(.5),this.hand.scale.setTo(.7),this.handAnimationLoop=this.game.time.events.loop(120,function(){var e;t.hand&&t.hand.exists&&t.hand.alive&&(t.handFrameIndex=(t.handFrameIndex+1)%11,e="h".concat(t.handFrameIndex.toString().padStart(3,"0")),t.cache.checkImageKey(e)?t.hand.loadTexture(e):console.warn("Missing frame:",e))},this),this.moveHandToNextInFlow(),this.music=this.add.audio("bgMusic"),this.music.loop=!0,this.music.play()}},{key:"moveHandToNextInFlow",value:function(){var e=this.fullFlow[this.handStep];console.log("Moving to next in flow:",e,"handStep:",this.handStep),e&&(this.revealNextCard(e),this.moveHandToCard(e))}},{key:"addCard",value:function(e,t,a){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,t=this.add.sprite(t,a,e),a=(t.anchor.set(.5),t.angle=s,t.scale.setTo(.87,.87),["diamonds8","heart7","clubs6","wildCard"].includes(e));(t.visible=a)||(t._trueKey=e,t.loadTexture("cardBack"),t.key="cardBack"),t.visible=!0,t.inputEnabled=!0,t.input.useHandCursor=!0,this.cardSprites[e]=t}},{key:"setCardInput",value:function(){var a=this;["diamonds8","clubs6"].forEach(function(e){var t=a.cardSprites[e];t&&(t.inputEnabled=!0,t.input.useHandCursor=!0,t.events.onInputDown.add(function(){return a.handleCardClick(e)},a))}),this.fullCardKeys=["diamonds8","heart7","clubs6","wildCard","heart3","spades2_left","diamondsA","spades2_right"],this.fullCardKeys.forEach(function(e){var t=a.cardSprites[e];t&&!t.events.onInputDown.has(a.handleCardClick,a)&&t.events.onInputDown.add(function(){return a.handleCardClick(e)},a)})}},{key:"handleCardClick",value:function(e){var a=this,t=this.fullFlow[this.handStep];if(0===this.handStep&&("clubs6"===e?(this.fullFlow=["clubs6","heart7","diamonds8","wildCard","heart3","spades2_right","diamondsA","spades2_left"],this.alternatePathChosen=!0):"diamonds8"===e&&(this.fullFlow=["diamonds8","heart7","clubs6","wildCard","heart3","spades2_left","diamondsA","spades2_right"],this.alternatePathChosen=!1),this.fullCardKeys.forEach(function(e){e=a.cardSprites[e];e&&(e.inputEnabled=!0)})),this.postWildcardPhase){var s,i=["heart3","diamondsA"].includes(e),n=["spades2_left","spades2_right"].includes(e);if(!i&&!n||!this.isPostWildcardClickAllowed(e))return void this.shakeCard(this.cardSprites[e]);if("red"===this.lastPostWildcardColor&&i)return void this.shakeCard(this.cardSprites[e]);if("black"===this.lastPostWildcardColor&&n)return void this.shakeCard(this.cardSprites[e]);this.lastPostWildcardColor=i?"red":"black",this.postWildcardFlow.push(e),this.handStep++,4===this.postWildcardFlow.length&&(s=new Set(this.postWildcardFlow),n=["heart3","diamondsA","spades2_left","spades2_right"].find(function(e){return!s.has(e)}),(i=this.fullFlow).splice.apply(i,[this.handStep+1,0].concat(o(this.postWildcardFlow))),n&&this.fullFlow.splice(this.handStep+1+this.postWildcardFlow.length,0,n),this.postWildcardPhase=!1,this.awaitingPostWildcardClick=!1,this.handPausedUntilNextClick=!1,this.moveHandToNextInFlow())}else if(console.log("Clicked:",e,"| Expected:",this.fullFlow[this.handStep],"| handStep:",this.handStep),!this.awaitingPostWildcardClick&&e!==t)return void("wildCard"!==e&&(i=this.cardSprites[e],["heart7","spades2_left","spades2_right"].includes(e))&&this.flippedCards.has(e)&&this.shakeCard(i));this.hand&&(this.hand.visible=!1,this.handRepeatTimer&&(this.game.time.events.remove(this.handRepeatTimer),this.handRepeatTimer=null),this.tapSequenceEvents)&&0<this.tapSequenceEvents.length&&(this.tapSequenceEvents.forEach(function(e){return a.game.time.events.remove(e)}),this.tapSequenceEvents=[]);var r=this.cardSprites[e],n=(this.world.bringToTop(r),this.game.add.tween(r).to({y:r.y-40},150,Phaser.Easing.Quadratic.Out)),t=this.game.add.tween(r).to({x:this.activeCard.x,y:this.activeCard.y,angle:720},350,Phaser.Easing.Quadratic.In);n.chain(t),n.start(),t.onComplete.add(function(){r.inputEnabled=!1,r.destroy(),a.cardSprites[e]=null,a.activeCard.loadTexture(e),a.updateScore(),"diamonds8"===e&&(a.timerStarted||(a.timerStarted=!0,a.startCountdown()),a.revealNextCard("spades2_left")),"heart7"===e&&(a.timerStarted=!0,a.timerEvent&&(a.game.time.events.remove(a.timerEvent),a.timerEvent=null),a.timerText&&(a.timerText.visible=!1),a.bomb&&(a.bomb.destroy(),a.bomb=null),a.bombAnimationLoop)&&(a.game.time.events.remove(a.bombAnimationLoop),a.bombAnimationLoop=null),"clubs6"===e&&(a.timerStarted||(a.timerStarted=!0,a.startCountdown()),a.revealNextCard("spades2_right")),"wildCard"===e&&(a.revealNextCard("heart3"),a.revealNextCard("diamondsA"),a.postWildcardPhase=!0,a.awaitingPostWildcardClick=!0,a.handPausedUntilNextClick=!0,a.postWildcardFlow=[],a.lastPostWildcardColor=null,["heart3","diamondsA","spades2_left","spades2_right"].forEach(function(e){var t=a.cardSprites[e];t&&(t.inputEnabled=!0,t.input.useHandCursor=!0,t.events.onInputDown.removeAll(),t.events.onInputDown.add(function(){return a.handleCardClick(e)},a))})),"heart3"===e&&a.showStreakIcon(0,"hudRed"),"spades2_left"===e&&a.showStreakIcon(1,"hudBlack"),"diamondsA"===e&&a.showStreakIcon(2,"hudRed"),"spades2_right"===e&&a.showStreakIcon(3,"hudBlack"),a.handStep++,a.handStep>=a.fullFlow.length?(console.log("All cards completed! Game over."),a.hand&&(a.hand.visible=!1,a.hand.destroy(),a.hand=null),a.handAnimationLoop&&(a.game.time.events.remove(a.handAnimationLoop),a.handAnimationLoop=null)):a.handPausedUntilNextClick||a.moveHandToNextInFlow()})}},{key:"updateScore",value:function(){var e=this,t=this.score+1e3;this.score=t,this.game.time.events.loop(Phaser.Timer.SECOND/60,function(){e.displayedScore<e.score&&(e.displayedScore+=25,e.displayedScore>e.score&&(e.displayedScore=e.score),e.scoreText.text=Math.floor(e.displayedScore).toLocaleString())},this)}},{key:"startCountdown",value:function(){var e=this;this.timerText.visible=!0,this.timerText.text=this.counter.toString(),this.timerEvent=this.game.time.events.loop(Phaser.Timer.SECOND,function(){e.counter--,0<=e.counter&&(e.timerText.text=e.counter.toString()),e.counter<=0&&e.game.time.events.remove(e.timerEvent)},this)}},{key:"moveHandToCard",value:function(t){var a,s,i,n,r,o=this,e=this.cardSprites[t];e&&e.alive&&e.visible?(a=this.hand,a.visible=!0,a.x=e.x+15,a.y=e.y+90,this.handRepeatTimer&&(this.game.time.events.remove(this.handRepeatTimer),this.handRepeatTimer=null),0<this.tapSequenceEvents.length&&(this.tapSequenceEvents.forEach(function(e){return o.game.time.events.remove(e)}),this.tapSequenceEvents=[]),s=0,i=3,n=1500,(r=function(){s++,a.visible=!0;var e=o.game.time.events.add(n,function(){s<i?r():(a.visible=!1,o.handRepeatTimer=o.game.time.events.add(10*Phaser.Timer.SECOND,function(){o.moveHandToCard(t)}))});o.tapSequenceEvents.push(e)})()):console.warn("Hand move skipped: card not found or already removed:",t)}},{key:"revealNextCard",value:function(e){var t;this.flippedCards.has(e)||((t=this.cardSprites[e])?(t._trueKey&&t.loadTexture(t._trueKey),t.visible=!0,t.inputEnabled=!0,t.input.useHandCursor=!0,this.flippedCards.add(e),["heart3","spades2_left","diamondsA","spades2_right"].includes(e)&&this.game.add.tween(t.scale).from({x:0},200,Phaser.Easing.Linear.None,!0)):console.warn("Tried to reveal missing card: ".concat(e)))}},{key:"showStreakIcon",value:function(e,t){e=this.streakIcons[e];e&&(e.loadTexture(t),e.visible=!0)}},{key:"shakeCard",value:function(e){var t;e.isShaking||(e.isShaking=!0,void 0===e.originalX&&(e.originalAngle=e.angle),this.game.tweens.removeFrom(e),(t=this.game.add.tween(e).to({angle:e.originalAngle-8},50,Phaser.Easing.Linear.None).to({angle:e.originalAngle+8},100,Phaser.Easing.Linear.None).to({angle:e.originalAngle-4},80,Phaser.Easing.Linear.None).to({angle:e.originalAngle+4},60,Phaser.Easing.Linear.None).to({angle:e.originalAngle},50,Phaser.Easing.Linear.None)).onComplete.add(function(){e.isShaking=!1,e.angle=e.originalAngle}),t.start())}},{key:"isPostWildcardClickAllowed",value:function(e){var t=["heart3","diamondsA"].includes(e),e=["spades2_left","spades2_right"].includes(e);return null===this.lastPostWildcardColor||!("red"!==this.lastPostWildcardColor||!e)||!("black"!==this.lastPostWildcardColor||!t)}}])&&n(t.prototype,a),s&&n(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,a,s})()},{}],4:[function(e,t,a){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=i(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0===a)return("string"===t?String:Number)(e);if("object"!=i(a=a.call(e,t||"default")))return a;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==i(e)?e:e+""))(s.key),s)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;a.default=(()=>{function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}return t=e,(a=[{key:"preload",value:function(){console.log("Preload -> preload"),this.load.image("background","Assets/bg.jpg"),this.load.image("cardBack","Assets/Card-Back.png"),this.load.image("clubs5","Assets/Clubs-5.png"),this.load.image("clubs6","Assets/Clubs-6.png"),this.load.image("diamonds8","Assets/Diamonds-8.png"),this.load.image("diamondsA","Assets/Diamonds-A.png"),this.load.image("heart3","Assets/Heart-3.png"),this.load.image("heart7","Assets/Heart-7.png"),this.load.image("spades2_left","Assets/Spades-2.png"),this.load.image("spades2_right","Assets/Spades-2.png"),this.load.image("wildCard","Assets/Wild-Card.png"),this.load.image("talon","Assets/Talon.png"),this.load.image("000","Assets/bomb/000.png"),this.load.image("001","Assets/bomb/001.png"),this.load.image("002","Assets/bomb/002.png"),this.load.image("h000","Assets/hand-frame/000.png"),this.load.image("h001","Assets/hand-frame/001.png"),this.load.image("h002","Assets/hand-frame/002.png"),this.load.image("h003","Assets/hand-frame/003.png"),this.load.image("h004","Assets/hand-frame/004.png"),this.load.image("h005","Assets/hand-frame/005.png"),this.load.image("h006","Assets/hand-frame/006.png"),this.load.image("h007","Assets/hand-frame/007.png"),this.load.image("h008","Assets/hand-frame/008.png"),this.load.image("h009","Assets/hand-frame/009.png"),this.load.image("h010","Assets/hand-frame/010.png"),this.load.image("logo","Assets/logo.png"),this.load.image("hudPanel","Assets/HUD-Panel.png"),this.load.image("hudBlack","Assets/HUD-Streakmeter_Black.png"),this.load.image("hudBlank","Assets/HUD-Streakmeter_Blank.png"),this.load.image("hudRed","Assets/HUD-Streakmeter_Red.png"),this.load.image("hudStreak","Assets/streak-hud.png"),this.load.audio("bgMusic","Assets/Game_music.mp3")}},{key:"create",value:function(){console.log("Preload -> create"),this.state.start("Game")}}])&&n(t.prototype,a),s&&n(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,a,s})()},{}]},{},[1]);